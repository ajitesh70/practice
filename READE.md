# SOP for Disk Management and ulimit Configuration**Project:** OT Microservices Platform**Repository:** [https://github.com/OT-MICROSERVICES](https://github.com/OT-MICROSERVICES)**Author:** Anirudh**Sprint:** 0---##  Table of Contents1. [Introduction](#1-introduction)2. [Prerequisites](#2-prerequisites)3. [Procedure](#3-procedure)   * [Checking Disk Usage](#31-checking-disk-usage)   * [Checking Mount Points](#32-checking-mount-points)   * [Configuring ulimit Settings](#33-configuring-ulimit-settings)4. [Best Practices](#4-best-practices)5. [Troubleshooting Tips](#5-troubleshooting-tips)6. [Contact Information](#6-contact-information)7. [References](#7-references)---## 1. IntroductionThis Standard Operating Procedure (SOP) defines the process for **disk management** and **resource limit (ulimit) configuration** on Ubuntu systems used in the **OT Microservices Platform**.Microservices running in this platform depend on:* Stable disk availability* Correct mount point configuration* Proper process-level resource limitsIncorrect disk or ulimit settings may cause:* Runtime failures* File descriptor exhaustion* Service instability or downtimeThis SOP standardizes operational steps to ensure reliability across all OT Microservices nodes.---## 2. PrerequisitesBefore performing disk or ulimit operations, ensure:* Ubuntu Linux system hosting OT microservices* SSH or terminal access to the node* `sudo` privileges* Basic understanding of Linux filesystems and servicesVerify access:```bashwhoami```---<img width="1075" height="166" alt="image" src="https://github.com/user-attachments/assets/4f247fb8-4cf0-4fa4-ac96-d8cabeaabe97" />## 3. Procedure### 3.1 Checking Disk UsageCheck overall disk usage:```bashdf -h```Displays total size, used space, available space, and mount points.Check disk usage for application-relevant directories (example: logs, volumes):```bashdu -sh /var/*```Helps identify directories consuming excessive disk space.List disks and partitions:```bashlsblk```---### 3.2 Checking Mount PointsView all mounted filesystems:```bashmount | column -t```Verify persistent mount configuration:```bashcat /etc/fstab```Ensures required volumes are mounted automatically after reboot.Check usage of a specific mount point:```bashdf -h /mount-point```---### 3.3 Configuring ulimit SettingsCheck current ulimit values:```bashulimit -a```Set a temporary ulimit value (current session only):```bashulimit -n 65535```Configure permanent ulimit settings for the OT Microservices user:Edit limits configuration:```bashsudo vi /etc/security/limits.conf```Add:```bashanirudh soft nofile 65535anirudh hard nofile 65535```Configure ulimit for systemd-managed microservices:```bashsudo systemctl edit <service-name>```Add:```ini[Service]LimitNOFILE=65535```Reload systemd and restart service:```bashsudo systemctl daemon-reexecsudo systemctl restart <service-name>```---## 4. Best Practices* Monitor disk usage regularly on microservice nodes* Maintain consistent mount points across environments (dev, stage, prod)* Apply ulimit settings before deploying new services* Avoid unlimited resource values unless explicitly required* Always restart services after modifying ulimit configurations---## 5. Troubleshooting Tips| Issue                   | Solution                              || ----------------------- | ------------------------------------- || Disk space full         | `du -sh /*`                           || Mount not available     | `mount -a`                            || ulimit not applied      | Log out and log in again              || Service ignoring limits | Verify systemd override configuration |---## 6. Contact Information**Owner:** Anirudh**Project:** OT Microservices Platform---## 7. References| Topic              | Link                                                                                                                                     | Description             || ------------------ | ---------------------------------------------------------------------------------------------------------------------------------------- | ----------------------- || Disk Usage         | [https://manpages.ubuntu.com/manpages/jammy/en/man1/df.1.html](https://manpages.ubuntu.com/manpages/jammy/en/man1/df.1.html)             | Disk usage command      || Disk Usage (du)    | [https://manpages.ubuntu.com/manpages/jammy/en/man1/du.1.html](https://manpages.ubuntu.com/manpages/jammy/en/man1/du.1.html)             | Directory size analysis || ulimit / setrlimit | [https://man7.org/linux/man-pages/man2/setrlimit.2.html](https://man7.org/linux/man-pages/man2/setrlimit.2.html)                         | Linux resource limits   || systemd Limits     | [https://www.freedesktop.org/software/systemd/man/systemd.exec.html](https://www.freedesktop.org/software/systemd/man/systemd.exec.html) | Service-level limits    |---
